{% load staticfiles %}
<ul class="top__menu">
    {% for link in top_menu %}
        <li>
            <a href="{% url link.href %}"
               class="top__menu_link{% if request.resolver_match.url_name == link.href %}
                        top__menu_link_sctive
                      {% endif %}">
                {{ link.name }}
            </a>
        </li>
    {% endfor %}
    {% if user.is_authenticated %}
    <li>
        <a href="{% url 'auth:edit' %}" class="top__menu_link">
            {{ user.first_name|default:'ПОЛЬЗОВАТЕЛЬ' }}
        </a>
    </li>
    {% endif %}
    <li>

    {% if not user.is_authenticated %}
    <li>
        <a href="{% url 'auth:register' %}" class="top__menu_link">ЗАРЕГИСТРИРОВАТЬСЯ</a>
    </li>

    {% endif %}
    <li>
        {% if user.is_authenticated %}
          <a href="{% url 'auth:logout' %}" class="top__menu_link">ВЫЙТИ</a>
        {% else %}
          <a href="{% url 'auth:login' %}" class="top__menu_link">ВОЙТИ</a>
        {% endif %}
    </li>
    <li><a href="#" class="top__menu_link"><img src="{% static '/images/search.png' %}" alt="Поиск"></a></li>
    <li>
        <a href="{% url 'basket:index' %}" class="basket">
          <span>
            {% if basket %}
              {{ basket.0.total_cost|floatformat:0 }} руб
              ({{ basket.0.total_quantity }} шт)
            {% endif %}
          </span>
        </a>
    </li>
</ul>
